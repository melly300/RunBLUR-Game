<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0">
<title>Runner Game</title>
<style>
html,body{margin:0;padding:0;overflow:hidden;background:#111}
canvas{display:block}
</style>
</head>
<body>
<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = innerWidth;
  canvas.height = innerHeight;
}
addEventListener("resize",resize);
resize();

let groundY;
function updateGround(){ groundY = canvas.height*0.82 }
updateGround();

let bgOffset=0;

let player={
  x:150,
  y:0,
  w:60,
  h:120,
  vy:0,
  jumping:false
};

let obstacles=[];
let gravity=1.2;
let score=0;
let gameOver=false;
let step=0;

function jump(){
  if(!player.jumping){
    player.vy = -canvas.height*0.04;
    player.jumping=true;
  }
}
addEventListener("keydown",jump);
addEventListener("click",jump);
addEventListener("touchstart",jump);

function spawnObstacle(){
  obstacles.push({
    x:canvas.width,
    y:groundY,
    w:70,
    h:80
  });
}
setInterval(spawnObstacle,1800);

function update(){
  if(gameOver)return;

  bgOffset+=3;

  player.y+=player.vy;
  player.vy+=gravity;

  if(player.y>=groundY){
    player.y=groundY;
    player.jumping=false;
  }

  for(let o of obstacles){
    o.x-=canvas.width*0.008;
    if(
      player.x<o.x+o.w &&
      player.x+player.w>o.x &&
      player.y-player.h<o.y &&
      player.y>o.y-o.h
    ){
      gameOver=true;
    }
  }

  obstacles=obstacles.filter(o=>o.x+o.w>0);
  score++;
  step++;
}

function drawCity(){
  ctx.fillStyle="#87ceeb";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  ctx.fillStyle="#555";
  for(let i=0;i<20;i++){
    let x=(i*200 - bgOffset*0.5)%(canvas.width+400)-200;
    let h=200+Math.sin(i)*100;
    ctx.fillRect(x,groundY-h,150,h);
  }
}

function drawTrash(x,y,w,h){
  ctx.fillStyle="#2f855a";
  ctx.fillRect(x,y-h,w,h);
  ctx.fillStyle="#22543d";
  ctx.fillRect(x,y-h, w,10);
  ctx.fillStyle="#111";
  ctx.fillRect(x+10,y-h+20,w-20,10);
}

function drawPlayer(){
  const px=player.x;
  const py=player.y;

  let runSwing = Math.sin(step*0.35)*18;
  let armSwing = Math.sin(step*0.35+Math.PI)*14;

  ctx.save();
  ctx.translate(px,py);

  // LEGS
  ctx.fillStyle="#1e3fa3";
  ctx.beginPath();
  if(player.jumping){
    ctx.ellipse(10,-10,7,30,0.5,0,Math.PI*2);
    ctx.ellipse(-10,-10,7,30,-0.5,0,Math.PI*2);
  } else {
    ctx.ellipse(10,-10-runSwing,7,30,0.5,0,Math.PI*2);
    ctx.ellipse(-10,-10+runSwing,7,30,-0.5,0,Math.PI*2);
  }
  ctx.fill();

  // BODY
  ctx.fillStyle="#2563eb";
  ctx.beginPath();
  ctx.ellipse(0,-60,18,30,0,0,Math.PI*2);
  ctx.fill();

  // ARMS
  ctx.beginPath();
  if(player.jumping){
    ctx.ellipse(25,-65,6,20,0.5,0,Math.PI*2);
    ctx.ellipse(-25,-65,6,20,-0.5,0,Math.PI*2);
  } else {
    ctx.ellipse(25,-65-armSwing,6,20,0.5,0,Math.PI*2);
    ctx.ellipse(-25,-65+armSwing,6,20,-0.5,0,Math.PI*2);
  }
  ctx.fill();

  // HEAD
  ctx.fillStyle="#5a3a1a";
  ctx.beginPath();
  ctx.arc(0,-105,14,0,Math.PI*2);
  ctx.fill();

  // AFRO
  ctx.fillStyle="#111";
  ctx.beginPath();
  ctx.arc(0,-120,20,Math.PI,0);
  ctx.fill();

  // FACE
  ctx.fillStyle="white";
  ctx.beginPath();
  ctx.arc(-5,-108,2,0,Math.PI*2);
  ctx.arc(5,-108,2,0,Math.PI*2);
  ctx.fill();

  // CHAIN
  ctx.strokeStyle="gold";
  ctx.lineWidth=2;
  ctx.beginPath();
  ctx.arc(0,-78,10,0,Math.PI);
  ctx.stroke();

  ctx.restore();
}

function drawGround(){
  ctx.fillStyle="#444";
  ctx.fillRect(0,groundY+5,canvas.width,5);
}

function drawScore(){
  ctx.fillStyle="black";
  ctx.font="30px Arial";
  ctx.fillText("Score: "+score,20,40);
}

function loop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  updateGround();
  update();

  drawCity();
  drawGround();

  for(let o of obstacles){
    drawTrash(o.x,o.y,o.w,o.h);
  }

  drawPlayer();
  drawScore();

  if(gameOver){
    ctx.fillStyle="black";
    ctx.font="80px Arial";
    ctx.fillText("GAME OVER",canvas.width*0.25,canvas.height*0.5);
    ctx.font="40px Arial";
    ctx.fillText("Tap to restart",canvas.width*0.35,canvas.height*0.6);
  }

  requestAnimationFrame(loop);
}

addEventListener("click",()=>{ if(gameOver)location.reload(); });
addEventListener("touchstart",()=>{ if(gameOver)location.reload(); });

loop();
</script>
</body>
</html>
