<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0">
<title>Runner Game</title>
<style>
html, body {
  margin: 0;
  padding: 0;
  background: #111;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
canvas {
  display: block;
}
</style>
</head>
<body>
<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

// ðŸŽµ music
const bgMusic = new Audio("Untitled Project 2.mp3");
bgMusic.loop = true;
bgMusic.volume = 0.3;
let musicStarted = false;

function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener("resize", resizeCanvas);
resizeCanvas();

let groundY;
function updateGround() {
  groundY = canvas.height * 0.8;
}
updateGround();

let player = {
  x: canvas.width * 0.25,
  y: 0,
  vy: 0,
  jumping: false
};

let police = {
  x: canvas.width * 0.15,
  y: 0
};

let obstacles = [];
let gravity = 1;
let score = 0;
let gameOver = false;
let step = 0;
let bgOffset = 0;

// === INPUT ===
function jump() {
  if (!player.jumping) {
    player.vy = -canvas.height * 0.04;
    player.jumping = true;
  }
  if (!musicStarted) {
    bgMusic.play();
    musicStarted = true;
  }
}
document.addEventListener("keydown", jump);
document.addEventListener("click", jump);
document.addEventListener("touchstart", jump);

// === SPAWN BINS ===
function spawnObstacle() {
  obstacles.push({
    x: canvas.width,
    y: groundY,
    w: canvas.width * 0.05,
    h: canvas.height * 0.12
  });
}
setInterval(spawnObstacle, 1800);

// === UPDATE ===
function update() {
  if (gameOver) return;

  player.y += player.vy;
  player.vy += gravity;

  if (player.y >= groundY) {
    player.y = groundY;
    player.jumping = false;
  }

  police.y = player.y;

  for (let obs of obstacles) {
    obs.x -= canvas.width * 0.008;

    if (
      player.x < obs.x + obs.w &&
      player.x + 40 > obs.x &&
      player.y - 100 < obs.y &&
      player.y > obs.y - obs.h
    ) {
      gameOver = true;
      bgMusic.pause();
    }
  }

  obstacles = obstacles.filter(o => o.x + o.w > 0);
  score++;
  step++;
  bgOffset -= canvas.width * 0.001;
}

// === CITY BACKGROUND ===
function drawBackground() {
  ctx.fillStyle = "#87ceeb";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  ctx.fillStyle = "#444";
  for(let i=0;i<20;i++){
    let x = (i*220 + bgOffset*0.5) % canvas.width;
    ctx.fillRect(x, groundY-220, 140, 220);
    ctx.fillStyle="#222";
    for(let y=0;y<5;y++){
      ctx.fillRect(x+20, groundY-200+y*40, 25,25);
      ctx.fillRect(x+80, groundY-200+y*40, 25,25);
    }
    ctx.fillStyle="#444";
  }
}

// === PLAYER DRAW (BALD) ===
function drawPlayer() {
  const px = player.x;
  const py = player.y;
  const run = Math.sin(step * 0.3) * 10;
  const jumpTilt = player.jumping ? -0.4 : 0;

  ctx.save();
  ctx.translate(px, py - 60);
  ctx.rotate(jumpTilt);

  // legs
  ctx.fillStyle = "#1e3fa3";
  ctx.beginPath();
  ctx.ellipse(-6, 30-run, 7, 26, 0.3, 0, Math.PI*2);
  ctx.ellipse(10, 3
